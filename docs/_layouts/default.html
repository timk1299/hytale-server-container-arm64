---
layout: table_wrappers
---
<!doctype html>

<html lang="{{ site.lang | default: 'en-US' }}">
  {% include head.html %}

  <body>
    <a class="skip-to-main" href="#main-content">Skip to main content</a>
    {% include icons/icons.html %}
    {% if page.nav_enabled == true %}
      {% include components/sidebar.html %}
    {% elsif layout.nav_enabled == true and page.nav_enabled == null %}
      {% include components/sidebar.html %}
    {% elsif site.nav_enabled != false and layout.nav_enabled == null and page.nav_enabled == null %}
      {% include components/sidebar.html %}
    {% endif %}
    <div class="main" id="top">
      {% include components/header.html %}
      <div class="main-content-wrap">
        {% include components/breadcrumbs.html %}
        <div id="main-content" class="main-content">
          <main>
            {% if site.heading_anchors != false %}
              {%
                include vendor/anchor_headings.html html=content beforeHeading="true" anchorBody="<svg
                viewBox=\"0 0 16 16\" aria-hidden=\"true\">
                <use xlink:href=\"#svg-link\"></use>
                </svg>" anchorClass="anchor-heading" anchorAttrs="aria-labelledby=\"%html_id%\""
              %}
            {% else %}
              {{ content }}
            {% endif %}

            {% if page.has_toc != false %}
              {% include components/children_nav.html %}
            {% endif %}
          </main>
          {% include components/footer.html %}
        </div>
      </div>
      {% if site.search_enabled != false %}
        {% include components/search_footer.html %}
      {% endif %}
    </div>

    {% if site.mermaid %}
      {% include components/mermaid.html %}
    {% endif %}

    <script>
      (function () {
        const darkModeQuery = window.matchMedia('(prefers-color-scheme: dark)');

        function applyTheme() {
          const theme = darkModeQuery.matches ? 'dark' : 'light';
          console.log('System prefers:', theme);

          if (typeof jtd !== 'undefined' && typeof jtd.setTheme === 'function') {
            console.log('Setting theme to:', theme);
            jtd.setTheme(theme);
          } else {
            console.log('jtd.setTheme not available');
          }
        }

        console.log('Page loaded, detecting theme...');
        applyTheme();

        darkModeQuery.addEventListener('change', function () {
          console.log('System theme changed');
          applyTheme();
        });
      })();
    </script>

    <script>
      (function () {
        const darkModeQuery = window.matchMedia('(prefers-color-scheme: dark)');
        let finalized = false;

        function finalize() {
          if (finalized) return;
          finalized = true;

          const currentTheme = darkModeQuery.matches ? 'dark' : 'light';
          document.documentElement.setAttribute('data-theme', currentTheme);

          try {
            if (window.jtd && typeof window.jtd.setTheme === 'function') {
              window.jtd.setTheme(currentTheme);
            }
          } catch (e) {}

          requestAnimationFrame(() => {
            requestAnimationFrame(() => {
              document.documentElement.classList.remove('loading');
              document.documentElement.classList.add('loaded');
            });
          });
        }

        if (document.readyState === 'complete') {
          finalize();
        } else {
          window.addEventListener('load', finalize);
          setTimeout(finalize, 2500);
        }

        darkModeQuery.addEventListener('change', function () {
          const newTheme = darkModeQuery.matches ? 'dark' : 'light';
          document.documentElement.setAttribute('data-theme', newTheme);
          if (window.jtd && typeof window.jtd.setTheme === 'function') {
            window.jtd.setTheme(newTheme);
          }
        });
      })();
    </script>
  </body>
</html>
