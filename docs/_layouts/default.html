---
layout: table_wrappers
---

<!DOCTYPE html>

<html lang="{{ site.lang | default: 'en-US' }}">
{% include head.html %}

<body>
  <a class="skip-to-main" href="#main-content">Skip to main content</a>
  {% include icons/icons.html %}
  {% if page.nav_enabled == true %}
  {% include components/sidebar.html %}
  {% elsif layout.nav_enabled == true and page.nav_enabled == nil %}
  {% include components/sidebar.html %}
  {% elsif site.nav_enabled != false and layout.nav_enabled == nil and page.nav_enabled == nil %}
  {% include components/sidebar.html %}
  {% endif %}
  <div class="main" id="top">
    {% include components/header.html %}
    <div class="main-content-wrap">
      {% include components/breadcrumbs.html %}
      <div id="main-content" class="main-content">
        <main>
          {% if site.heading_anchors != false %}
          {% include vendor/anchor_headings.html html=content beforeHeading="true" anchorBody="<svg viewBox=\"0 0 16
            16\" aria-hidden=\"true\">
            <use xlink:href=\"#svg-link\"></use>
          </svg>" anchorClass="anchor-heading" anchorAttrs="aria-labelledby=\"%html_id%\"" %}
          {% else %}
          {{ content }}
          {% endif %}

          {% if page.has_toc != false %}
          {% include components/children_nav.html %}
          {% endif %}
        </main>
        {% include components/footer.html %}
      </div>
    </div>
    {% if site.search_enabled != false %}
    {% include components/search_footer.html %}
    {% endif %}
  </div>

  {% if site.mermaid %}
  {% include components/mermaid.html %}
  {% endif %}
</body>

<script src="https://unpkg.com/swup@4"></script>
<script>
  const swup = new Swup({
    containers: ["#main-content"],
    skipIfSamePath: false
  });

  function reinitJustTheDocs() {
    if (window.jtd && typeof jtd.init === 'function') {
      jtd.init();
    }
    if (window.initSearch) {
      window.initSearch();
    }
    document.body.classList.remove('nav-open');
    const menuBtn = document.getElementById('menu-button');
    if (menuBtn) {
      menuBtn.setAttribute('aria-expanded', 'false');
    }
  }

  function syncSidebar() {
    const currentPath = window.location.pathname.replace(/\/$/, "");
    const homePath = "/hytale-server-container";

    document.querySelectorAll('.nav-list-item').forEach((item, index) => {
      const link = item.querySelector('.nav-list-link');
      if (!link) return;

      let linkPath = link.getAttribute('href') ? link.getAttribute('href').replace(/\/$/, "") : "";
      const linkText = link.innerText.toLowerCase();

      // Reset state
      link.classList.remove('active');
      link.style.fontWeight = "400";
      link.style.color = "";
      item.classList.remove('active');

      // Logic for Home and missing HREFs (like Roadmap)
      const isHome = (currentPath === homePath || currentPath === homePath + "/index.html") && (index === 0 || linkText.includes("home"));
      const isRoadmap = currentPath.includes("roadmap") && linkText.includes("roadmap");
      const isPathMatch = linkPath !== "" && linkPath === currentPath;

      if (isHome || isRoadmap || isPathMatch) {
        link.classList.add('active');
        link.style.fontWeight = "600";
        link.style.color = "#4593fb";
        item.classList.add('active');

        // Keep parent menus open
        let parent = item;
        while (parent) {
          if (parent.classList.contains('nav-list-item')) {
            const expander = parent.querySelector('.nav-list-expander');
            if (expander) expander.setAttribute('aria-expanded', 'true');
            const subList = parent.querySelector('.nav-list');
            if (subList) subList.style.display = 'block';
          }
          parent = parent.parentElement.closest('.nav-list-item');
        }
      }
    });
  }

  function makeNavItemsClickable() {
    document.querySelectorAll('.nav-list-item').forEach(item => {
      item.style.cursor = 'pointer';
      item.onclick = (e) => {
        const link = item.querySelector('.nav-list-link');
        // Prevent trigger if clicking the expander button specifically
        if (link && !e.target.closest('.nav-list-expander')) {
          const href = link.getAttribute('href');
          if (href) {
            swup.navigate(href);
          } else if (e.target !== link) {
            link.click();
          }
        }
      };
    });
  }

  swup.hooks.on('page:view', () => {
    reinitJustTheDocs();
    syncSidebar();
    makeNavItemsClickable();
    window.scrollTo(0, 0);
    const mainContent = document.getElementById('main-content');
    if (mainContent) {
      mainContent.setAttribute('tabindex', '-1');
      mainContent.focus();
    }
  });

  document.addEventListener('DOMContentLoaded', () => {
    syncSidebar();
    makeNavItemsClickable();
  });
</script>

</html>